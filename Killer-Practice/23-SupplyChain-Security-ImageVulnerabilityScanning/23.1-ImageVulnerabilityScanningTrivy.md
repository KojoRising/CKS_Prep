# PRACTICE/OVERVIEW
```yaml
curl https://raw.githubusercontent.com/KojoRising/CKA_Prep/main/abbreviated_alias.sh > alias.sh && source alias.sh
```
Using trivy :

Scan images in Namespaces applications and infra for the vulnerabilities CVE-2021-28831 and CVE-2016-9841 .

Scale those Deployments containing any of these down to 0 .

#### 1) Get Images
```yaml
controlplane $ APP_IMAGES=$(kg deploy -n=applications $JP="{..image}")
controlplane $ echo "$APP_IMAGES"
nginx:1.19.1-alpine-perl nginx:1.20.2-alpine

controlplane $ kg deploy -n=infra $CC=NAME:.metadata.name,IMG:..image
NAME      IMG
inf-hjk   httpd:2.4.39-alpine
```

#### 2) Scan using trivy
```yaml
controlplane $ trivy image nginx:1.20.2-alpine | grep "CVE-2021-28831\|CVE-2016-9841"
controlplane $ trivy image nginx:1.19.1-alpine-perl | grep "CVE-2021-28831\|CVE-2016-9841"
| busybox      | CVE-2021-28831   |          | 1.31.1-r9         | 1.31.1-r10    | busybox: invalid free or segmentation |
| ssl_client   | CVE-2021-28831   | HIGH     | 1.31.1-r9         | 1.31.1-r10    | busybox: invalid free or segmentation |
controlplane $ trivy image httpd:2.4.39-alpine | grep "CVE-2021-28831\|CVE-2016-9841"
| busybox                 | CVE-2021-28831   |          | 1.30.1-r2         | 1.30.1-r5     | busybox: invalid free or segmentation |
| ssl_client              | CVE-2021-28831   | HIGH     | 1.30.1-r2         | 1.30.1-r5     | busybox: invalid free or segmentation |
```

#### 3)
```yaml
controlplane $ kg deploy -n=applications $CC=NAME:.metadata.name,IMG:..image
NAME   IMG
web1   nginx:1.19.1-alpine-perl
web2   nginx:1.20.2-alpine

controlplane $ k scale deploy/web1 -n=applications --replicas=0
deployment.apps/web1 scaled

controlplane $ k scale deploy/inf-hjk -n=infra --replicas=0
deployment.apps/inf-hjk scaled
```

#### 4)
```yaml

```

#### 5)
```yaml

```

#### 6)
```yaml

```

#### 7)
```yaml

```

#### 8)
```yaml

```

#### 9)
```yaml

```

#### 10)
```yaml

```

